gather(variable, value, mean_pct_MRA_legis_spending, mean_pct_MRA_politrel_spending,  mean_pct_MRA_admin_spending)
spending_shares_long$congress <- as.factor(spending_shares_long$congress)
spending_shares_long$variable <- as.factor(spending_shares_long$variable)
spending_shares_long <- spending_shares_long %>% mutate( variable = fct_relevel(variable, "mean_pct_MRA_legis_spending"))
spending_shares_long_means <- spending_shares_long %>% dplyr::group_by(congress, variable) %>% dplyr::summarise(mean_value= mean(value, na.rm=T))
library(forcats)
spending_shares_long <- spending_shares_long %>% mutate( variable = fct_relevel(variable, "mean_pct_MRA_legis_spending"))
spending_shares_long_means <- spending_shares_long %>% dplyr::group_by(congress, variable) %>% dplyr::summarise(mean_value= mean(value, na.rm=T))
spending_shares_long_means <- ungroup(spending_shares_long_means)
spending_shares_long_means$congress <- as.numeric(as.character(spending_shares_long_means$congress))
ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
g <- ggplot(spending_shares_long_medians, aes(x=congress, y=median_value, color = variable, group=variable, linetype = variable)) +
theme_minimal() + geom_line() +geom_point() + scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_y_continuous("Median share of MRA",  labels = scales::percent_format(accuracy = 1),  limits = c(0,.5)) +  theme(legend.position="bottom")
ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
values = c("a", "b", "g"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
?scale_linetype_discrete
ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_manual(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
values = c("a", "b", "g"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_manual(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
values = c("a", "b", "g", "h"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_manual(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_manual(name="",
values = c(1,2,3)
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_manual(name="",
values = c(1,2,3),
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
st1 <- ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal() +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_manual(name="",
values = c(1,2,3),
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
ggsave("CFLB_Figure_1.pdf",st1, width=5, height =3.25, device="pdf")
ggsave("CFLB_Figure_1.pdf",st1, width=5, height =3.75, device="pdf")
st1 <- ggplot(spending_shares_long, aes(x=as.numeric(as.character(congress)), y=value, color=fct_relevel(variable, "mean_pct_MRA_legis_spending"), group=fct_relevel(variable, "mean_pct_MRA_legis_spending"), linetype= fct_relevel(variable, "mean_pct_MRA_legis_spending"))) +
theme_minimal(base_size = 10) +geom_smooth(method="loess") +geom_point(data = spending_shares_long_means, aes(x=congress, y=mean_value), size=2) +
scale_x_continuous("Congress", breaks = c(103, 105, 107, 109, 111, 113), labels = c("103rd", "105th", "107th", "109th", "111th", "113th")) +
scale_colour_discrete(name="",
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff"))  +
scale_linetype_manual(name="",
values = c(1,2,3),
breaks=c("mean_pct_MRA_legis_spending", "mean_pct_MRA_politrel_spending",  "mean_pct_MRA_admin_spending"),
labels=c("Legislative staff", "Representational staff", "Administrative staff")) +
scale_y_continuous("Mean share of MRA",  labels = scales::percent_format(accuracy = 1))   +  theme(legend.position="bottom", legend.key.width=unit(3,"lines"), legend.key=element_rect(fill="white",colour="white")) +
guides(colour = guide_legend(override.aes = list(se = F)))
ggsave("CFLB_Figure_1.pdf",st1, width=5, height =3.75, device="pdf")
ggsave("CFLB_Figure_1.pdf",st1, width=5.5, height =3.75, device="pdf")
vcov_model1be_dem <- vcovBS(model1be_dem, cluster=datadem$congress)
?betareg
rm(list=ls())
library(dplyr)
library(readr)
library(weights)
library(forcats)
library(boot)
library(xtable)
library(stringr)
library(broom)
library(readstata13)
library(sampleSelection)
library(ordinal)
library(Amelia)
full_sampling_frame <- readstata13::read.dta13("/Users/alexanderfurnas/Dropbox/Cong'l Capacity Survey/Data/LegiStorm Sample Frame/Legistorm_Sampling_Frame_AllDCStaff.dta")
table(full_sampling_frame$officetype2, full_sampling_frame$prefix)
balance_vars
full_sampling_frame
balance_vars <- full_sampling_frame %>% filter( experiment == 1 | ls_request == 1)
balance_vars
dim(balance_vars)
balance_vars$log_salary <- log(balance_vars$salary)
dat <- read_csv("/Users/alexanderfurnas/Dropbox/Projects/Dissertation/Chapter3/CCS_all_responses_mult_weighted.1.30.csv")
dat <- filter(dat, experiment == 1)
dat$log_salary <- log(dat$salary)
names(dat)
dat2 <- dat %>% dplyr::select(-c(salary, log_salary, num_titles,num_offices,num_members,respondent, experiment, tenure,gap,gender,chamber, fullnamewithpreferred, title, partyaffiliation, memberofcongressoffice, congressionalstate, congressionaldistrict, issues,
committees, prefix, chamber_ls1, chamber_ls2, party_ls1, party_ls2, party_ls3, officetype, officetype2,num_employers, gap, ls_race, ls_educ, title_cat, fellow, combo, seniority))
library(stringr)
dat2 <- balance_vars %>% left_join(dat2, by = "ccsid")
dat2 <- dat2 %>% filter(!(is.na(block) & respondent == 1))
dat2 <- as_tibble(dat2)
dat2$experiment[is.na(dat2$experiment)] <- 1
dat2$num_issues <- str_count(dat2$issues, ";")
dat2$num_committees <- str_count(dat2$committees, ";")
dat2$gender_code[dat2$gender == "M"] <- 0
dat2$gender_code[dat2$gender == "F"] <- 1
dat2$nonwhite <- 1
dat2$nonwhite[dat2$ls_race == "Caucasian"] <- 0
dat2$nonwhite[is.na(dat2$ls_race)] <- NA
dat2$gap_code <- NA
dat2$gap_code[dat2$gap == "Yes"] <- 1
dat2$gap_code[dat2$gap == "No"] <- 0
dat2$memberofcongressoffice <- str_trim(dat2$memberofcongressoffice)
dwnoms <- read_csv("/Users/alexanderfurnas/Dropbox/Projects/Dissertation/Chapter3/Sample_Offices.csv") %>% dplyr::select(party_ls2, memberofcongressoffice, nominate_dim1)
dwnoms <- unique(dwnoms)
dim(dat2)
dat2 <- dat2 %>% left_join(dwnoms)
summary(dat2$nominate_dim1)
dat2$junior_staff <- 0
dat2$junior_staff[dat2$seniority == 0] <- 1
dat2$senior_staff <- 0
dat2$senior_staff[dat2$seniority == 2] <- 1
dat2$commitee_office <- 0
dat2$commitee_office[dat2$officetype2 == 2] <- 1
dat2$leadership_office <- 0
dat2$leadership_office[dat2$officetype2 == 3] <- 1
dat2$leg_staff <- 0
dat2$leg_staff[dat2$title_cat == 1] <- 1
dat2$psweight[dat2$experiment == 0] <- 1
dat2
names(dat2)
dat2$ident
names(dat2)
dat2$issue
names(dat2)
dim(dat2)
unique(dat2$info)
ls(as.numeric(takemeeting) ~ as.factor(ident) + as.factor(info) + as.factor(action), data = filter(dat2, experiment == 1))
ls(as.numeric(takemeeting) ~ as.factor(ident) + as.factor(info) + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
?ls
lm(as.numeric(takemeeting) ~ as.factor(ident) + as.factor(info) + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
dat2$ident
dat2$action
dat2$ident
lm(as.numeric(takemeeting) ~ as.factor(ident) + as.factor(info) + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
dat2$takemeeting
lm(as.numeric(takemeeting) ~ as.factor(ident) + as.factor(info) + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
lm(as.numeric(as.factor(takemeeting)) ~ as.factor(ident) + as.factor(info) + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
unique(dat2$takemeeting)
dat2$takemeeting <- fct_relevel(factor(dat2$takemeeting), "Very unlikely", "Somewhat unlikely", "Neither","Somewhat likely","Very likely" )
tm <- lm(as.numeric(takemeeting) ~ as.factor(ident) + as.factor(info) + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
summary(tm)
summary(tm)
levels(factor(dat2$info))
tm <- lm(as.numeric(takemeeting) ~ as.factor(ident) + relevel(as.factor(info), ref =3)  + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
summary(tm)
library(eRm)
library(eRm)
dat2$q19_1 <- fct_relevel(dat2$q19_1, "Strongly agree", "Somewhat agree", "Neither", "Somewhat disagree", "Strongly disagree")
dat2$q19_2 <- fct_relevel(dat2$q19_2, "Strongly agree", "Somewhat agree", "Neither", "Somewhat disagree", "Strongly disagree")
dat2$q19_3 <- fct_relevel(dat2$q19_3, "Strongly agree", "Somewhat agree", "Neither", "Somewhat disagree", "Strongly disagree")
dat2$q19_4 <- fct_relevel(dat2$q19_4, "Strongly agree", "Somewhat agree", "Neither", "Somewhat disagree", "Strongly disagree")
dat2$q19_5 <- fct_relevel(dat2$q19_5, "Strongly agree", "Somewhat agree", "Neither", "Somewhat disagree", "Strongly disagree")
dat2$q19_1_num <- as.numeric(fct_rev(dat2$q19_1))
dat2$q19_2_num <- as.numeric(dat2$q19_2)
dat2$q19_3_num <- as.numeric(dat2$q19_3)
dat2$q19_4_num <- as.numeric(dat2$q19_4)
dat2$q19_5_num <- as.numeric(dat2$q19_5)
surv_ideo <- dat2 %>% dplyr::select(ccsid, q19_1_num, q19_2_num,q19_3_num,q19_4_num,q19_5_num)
surv_ideo <- surv_ideo %>% na.omit
res.rsm <- PCM(dplyr::select(surv_ideo, -ccsid))
thresholds(res.rsm)
pf <- person.parameter(res.rsm)
surv_ideo$ideology.irt <- coef(pf)
surv_ideo$ideology.irt <- coef(pf)
dat2 <- dat2 %>% dplyr::select(-ideology.irt)
dat2 <- dat2 %>% left_join(dplyr::select(surv_ideo, ccsid, ideology.irt))
summary(dat2$ideology.irt)
dat2$left_ideology[dat2$ideology.irt < 0] <- 1
tm_l <- lm(as.numeric(takemeeting) ~ as.factor(ident) + relevel(as.factor(info), ref =3)  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology == 1))
tm_r <- lm(as.numeric(takemeeting) ~ as.factor(ident) + relevel(as.factor(info), ref =3)  + as.factor(action), data = dplyr::filter(dat2, experiment == 1), left_ideology ==0))
tm_r <- lm(as.numeric(takemeeting) ~ as.factor(ident) + relevel(as.factor(info), ref =3)  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology ==0))
dat2$left_ideology <- NA
dat2$left_ideology[dat2$ideology.irt > 0] <- 0
dat2$left_ideology[dat2$ideology.irt < 0] <- 1
tm_l <- lm(as.numeric(takemeeting) ~ as.factor(ident) + relevel(as.factor(info), ref =3)  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology == 1))
tm_r <- lm(as.numeric(takemeeting) ~ as.factor(ident) + relevel(as.factor(info), ref =3)  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology ==0))
summary(tm_l)
summary(tm_r)
tm_r <- lm(as.numeric(takemeeting) ~ as.factor(ident) + relevel(as.factor(info), ref =3)*ideology.irt  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology ==0))
summary(tm_r)
summary(dat2$takemeeting)
sum( 32                26                59               130               137 )
32+                26      +          59     +          130               +137
dat2$useinfo <- fct_relevel(factor(dat2$useinfo), "Very unlikely", "Somewhat unlikely", "Neither","Somewhat likely","Very likely" )
dat2$recommendtoboss <- fct_relevel(factor(dat2$recommendtoboss), "Very unlikely", "Somewhat unlikely", "Neither","Somewhat likely","Very likely" )
tm_l <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3)  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology == 1))
summary(tm_l)
tm_l <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3)*ideology.irt  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology == 1))
summary(tm_l)
tm_r <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3)*ideology.irt  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology ==0))
summary(tm_r)
dat2$ident_
tm_l <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3)*ideology.irt  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology == 1))
tm_r <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3)*ideology.irt  + as.factor(action), data = dplyr::filter(dat2, experiment == 1, left_ideology ==0))
summary(tm_l)
summary(tm_r)
unique(as.factor(dat2$info))
unique(as.factor(dat2$ident))
dat2$exp_source <- dat2$info
summary(dat2$party_ls2)
dat2$exp_source_ideology <- 0
dat2$exp_source[dat2$info == "evidence of how their proposal would help jobs and employment in your constituency from a center-left think-tank."] <- -1
dat2$exp_source[dat2$info == "evidence of how their proposal would help jobs and employment in your constituency from a center-right think-tank."] <- 1
summary(as.factor(dat2$exp_source))
dat2$exp_source_ideology <- 0
dat2$exp_source_ideology[dat2$info == "evidence of how their proposal would help jobs and employment in your constituency from a center-left think-tank."] <- -1
dat2$exp_source_ideology[dat2$info == "evidence of how their proposal would help jobs and employment in your constituency from a center-right think-tank."] <- 1
summary(as.factor(dat2$exp_source_ideology))
dat2$exp_source_ideology <- NA
dat2$exp_source_ideology[dat2$info == "polling from your constituency that shows support for their position."] <- 0
dat2$exp_source_ideology[dat2$info == "evidence of how their proposal would help jobs and employment in your constituency from an analysis they conducted."] <- 0
dat2$exp_source_ideology[dat2$info == "evidence of how their proposal would help jobs and employment in your constituency from a center-left think-tank."] <- -1
dat2$exp_source_ideology[dat2$info == "evidence of how their proposal would help jobs and employment in your constituency from a center-right think-tank."] <- 1
summary(as.factor(dat2$exp_source_ideology))
plot(dat2$nominate_dim1, dat2$ideology.irt)
ui <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3) + dat2$exp_source_ideology*ideology.irt  + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
ui <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3) + exp_source_ideology*ideology.irt  + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
summary(ui)
ui <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3) + exp_source_ideology:ideology.irt  + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
summary(ui)
ui <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3) + exp_source_ideology:ideology.irt +ideology.irt + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
summary(ui)
ui <- lm(as.numeric(useinfo) ~ as.factor(ident) + relevel(as.factor(info), ref =3) + exp_source_ideology:ideology.irt + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
summary(ui)
tm <- lm(as.numeric(takemeeting) ~ as.factor(ident) + relevel(as.factor(info), ref =3) + exp_source_ideology:ideology.irt + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
summary(tm)
rb <- lm(as.numeric(recommendtoboss) ~ as.factor(ident) + relevel(as.factor(info), ref =3) + exp_source_ideology:ideology.irt + as.factor(action), data = dplyr::filter(dat2, experiment == 1))
summary(recommendtoboss)
summary(rb)
lm(as.numeric(useinfo) ~ as.factor(ident)*as.factor(info)*as.factor(action)*as.factor(party_ls2), data = dplyr::filter(dat2, experiment == 1))
fullm <- lm(as.numeric(useinfo) ~ as.factor(ident)*as.factor(info)*as.factor(action)*as.factor(party_ls2), data = dplyr::filter(dat2, experiment == 1))
summary(fullm)
anova(fullm)
fullm <- lm(as.numeric(useinfo) ~ as.factor(ident)*as.factor(info)*as.factor(action)*as.factor(party_ls2)*ideology.irt, data = dplyr::filter(dat2, experiment == 1))
anova(fullm)
fullm <- lm(as.numeric(useinfo) ~ as.factor(ident)*as.factor(info)*as.factor(action)*as.factor(party_ls2) + exp_source_ideology:ideology.irt, data = dplyr::filter(dat2, experiment == 1))
anova(fullm)
fullm <- lm(as.numeric(useinfo) ~ as.factor(ident)*as.factor(info)*as.factor(action)*as.factor(party_ls2) + exp_source_ideology:ideology.irt + exp_source_ideology:nominate_dim1, data = dplyr::filter(dat2, experiment == 1))
anova(fullm)
fullm$coefficients
fullm$coefficients[1]
fullm$coefficients[2]
fullm$coefficients[2:4]
sqrt(diag(vcov(fullm))[2:4]
sqrt(diag(vcov(fullm)))[2:4]
dat
ggplot(dat, aes(x=ideology.irt,y=nominate_dim1))
dev.off()
ggplot(dat, aes(x=ideology.irt,y=nominate_dim1)) + geom_point()
ggplot(dat2, aes(x=ideology.irt,y=nominate_dim1)) + geom_point()
ggplot(dat2, aes(x=ideology.irt,y=nominate_dim1, label = party_ls2)) + geom_text()
ggplot(dat2, aes(x=ideology.irt,y=nominate_dim1, label = party_ls2)) + geom_text(size=unit(12, "pt"))
?unit
ggplot(dat2, aes(x=ideology.irt,y=nominate_dim1, label = party_ls2)) + geom_text(size=unit(12, "points"))
ggplot(dat2, aes(x=ideology.irt,y=nominate_dim1, label = as.character(party_ls2))) + geom_text(size=unit(12, "points"))
ggplot(dat2, aes(x=ideology.irt,y=nominate_dim1, label = as.character(party_ls2))) + geom_text(size=unit(12, "cm"))
ggplot(dat2, aes(x=ideology.irt,y=nominate_dim1, label = as.character(party_ls2))) + geom_text(size=12)
#load required packages
library(MASS)
library(ggplot2)
library(texreg)
setwd("/Users/alexanderfurnas/Downloads/dataverse_files/")
#load required data files
#load masterlist of bills and endorsements
letters <- read.csv("fulldataALLH2018.csv", header = TRUE, na.strings=c("", "NA"))
#remove subset of letters in opposition
letters2 <- subset(letters, (oppose!=1) | is.na(oppose))
#add Congress dummy variables
letters2$C106 <- ifelse(letters2$Cong==106,1,0)
letters2$C107 <- ifelse(letters2$Cong==107,1,0)
letters2$C108 <- ifelse(letters2$Cong==108,1,0)
letters2$C109 <- ifelse(letters2$Cong==109,1,0)
letters2$C110 <- ifelse(letters2$Cong==110,1,0)
letters2$C111 <- ifelse(letters2$Cong==111,1,0)
#limit to bills with Dear Colleagues
letters3 <- subset(letters2, dcsent==1)
letters3
letters3 <- letters3 %>% as_tibble()
letters3
names(letters3)
igs <- letters3[,52:136]
igs
library(tidyr)
?gather
igs_long <- igs %>% gather("ig_var", "ig_val")
igs_long
length(unique(igs_long$ig_val))
# set wd
setwd("/Users/alexanderfurnas/Downloads/dataverse_files/")
# load network data
load("ac-net_igraph.RData")
# libraries
library(igraph)
objects()
g
plot(g)
?plotting.igraph
?igraph.plotting
plot(g, size = .2, label = NA)
plot(g, vertex.size=1, vertex.label=NA)
?zachary
?karate
library(igraphdata)
install.packages("igraphdata")
library(igraphdata)
karate
?igraphdata
data(karate)
karate
plot(karate)
km <- as_adjacency_matrix(karate)
km
km <- as.matrix(as_adjacency_matrix(karate))
km
upper.tri(km, diag = FALSE)
km[upper.tri(km, diag = FALSE)]
km
yfc <- function(congress){
year <- 2*(congress-1) + 1789
}
yfc(114)
yfc <- function(congress){
year <- 2*(congress-1) + 1789
return(year)
}
yfc(114)
yfc <- function(congress = 114){
year <- 2*(congress-1) + 1789
return(year)
}
yfc()
yfc <- function(congress, year = "first"){
if (year == "first"){
y <- 2*(congress-1) + 1789
} else {
y <- 2*(congress-1) + 1760
}
return(y)
}
yfc <- function(congress, year = "first"){
if (year == "first"){
y <- 2*(congress-1) + 1789
} if else(year == "second") {
y <- 2*(congress-1) + 1760
}
return(y)
}
yfc(114, year = "second")
yfc <- function(congress, year = "first"){
if (year == "first"){
y <- 2*(congress-1) + 1789
} if else (year == "second") {
y <- 2*(congress-1) + 1760
}
return(y)
}
yfc <- function(congress, year = "first"){
if (year == "first"){
y <- 2*(congress-1) + 1789
}  else if (year == "second") {
y <- 2*(congress-1) + 1760
}
return(y)
}
yfc(114, year = "second")
yfc(114)
yfc <- function(congress, year = "first"){
if (year == "first"){
y <- 2*(congress-1) + 1789
}  else if (year == "second") {
y <- 2*(congress-1) + 1790
}
return(y)
}
yfc(114, year = "second")
cfy <- function(year){
c = (y - 1789)/2 + 1
return(c)
}
cfy(2015)
cfy <- function(year){
c = (year - 1789)/2 + 1
return(c)
}
cfy(2015)
cfy <- function(year){
c = (year - 1789)/2 + 1
return(c)
}
cfy(2016)
cfy <- function(year){
c = (year - 1789)/2 + 1
c <- c %/% 1
return(c)
}
cfy(2016)
cfy(2015)
cfy(1790)
cfy(c(1790, 1800))
cfy(NA)
cfy(c(1790,NA, 1800))
install.packages("roxygen2")
library(devtools)
library(roxygen2)
setwd("/Users/alexanderfurnas/Dropbox/Projects")
devtools::create("congressTools")
devtools::document()
setwd("/Users/alexanderfurnas/Dropbox/Projects/congressTools")
devtools::document()
rm(list = ls())
library(devtools)
install_github("https://github.com/alexanderfurnas/congressTools")
library(congressTools)
?ytc
??congressTools
?yfc
rm(list = ls())
library(devtools)
install_github("https://github.com/alexanderfurnas/congressTools")
library(congressTools)
?yfc
yfc(101)
yfc(101, year = "second")
yfc(101, year = "first")
cfy(2001)
cfy(c(2001, 2005, 2009, 1845, NA, 1967))
install_github("https://github.com/alexanderfurnas/congressTools")
devtools::document()
setwd("/Users/alexanderfurnas/Dropbox/Projects/congressTools")
devtools::document()
install_github("https://github.com/alexanderfurnas/congressTools")
rm(list = ls())
library(devtools)
install_github("https://github.com/alexanderfurnas/congressTools")
